<!DOCTYPE html>
<!--[if IE 8]><html class="ie8"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
  <title>Getting Started with Postgres</title>

  <meta name="description" content="How to setup and install PostgresSQL 9.3.1. Postgres commands. How to create a database, table and insert records.">
  <meta name="author" content="Ben Reinhart">

  <meta name="viewport" content="width=device-width, initial-scale=0.8" />

  <link href='http://fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/public/css/main.css">
</head>
<body>
  <div class="container">
<div class="heading animated flip-in-y">
  <a href="/" class="me">
    <img src="/public/img/me_95x95.jpeg" width="95" height="95" title="Ben Reinhart">
  </a>

    <a href="/" class="name"><strong>Ben Reinhart</strong></a>
    <p>Software Developer</p>

  <ul class="clearfix">
    <li>
      <a href="http://twitter.com/benjreinhart" class="icon-twitter" title="tweets"></a>
    </li>
    <li>
      <a href="https://github.com/benjreinhart" class="icon-github" title="codes"></a>
    </li>
    <li>
      <a href="mailto:benjreinhart@gmail.com" class="icon-envelope-alt" title="email"></a>
    </li>
  </ul>
</div>

    <div class="main ">

        <h1>Getting Started with Postgres</h1>

      <p>I used <a href="http://brew.sh">Homebrew</a> for installation but <a href="http://postgresapp.com/">Postgres.app</a> looks like a solid choice as well.</p>
<pre><code>$ brew update
$ brew install postgres</code></pre>
<p>If the build was successful, Homebrew will print some build notes which may be of use later on. It may be worthwhile to save these notes into a file.</p>
<p>Next, create a database cluster:</p>
<pre><code>$ initdb /usr/local/var/postgres -E utf8</code></pre>
<p>Create a new database named &quot;sandbox&quot; to play around with:</p>
<pre><code>$ createdb sandbox</code></pre>
<p><em>Note that postgres has already created a few databases, i.e. <code>postgres</code>, <code>template0</code>, <code>template1</code>.</em></p>
<p>To start postgres, run the <code>postgres</code> binary passing it the location specified in the <code>initdb</code> command.</p>
<pre><code>$ postgres -D /usr/local/var/postgres &amp;</code></pre>
<p>Now that the database is running, connect to it using the <code>psql</code> command. Typing the command without any arguments will attempt to open the default database, which is your system user name. Connect to the <code>sandbox</code> database with <code>psql sandbox</code>.</p>
<p>Postgres offers help via the <code>help</code> command inside the repl. It also offers help specifically for SQL commands via <code>\h</code> and psql commands via <code>\?</code>. Here are some other commands that I found useful:</p>
<ul>
<li><code>\l</code> list databases</li>
<li><code>\dn</code> list schemas</li>
<li><code>\dt</code> list tables</li>
<li><code>\d+ table_name</code> describe table <code>table_name</code></li>
<li><code>\dg</code> list roles</li>
</ul>
<p>Next, create an example table under the <code>public</code> schema to play with. For example, a basic rails-like table might look like the following:</p>
<pre><code class="lang-sql"><span class="k">create</span> <span class="k">table</span> <span class="k">public</span><span class="p">.</span><span class="n">users</span> <span class="p">(</span><br />  <span class="n">id</span> <span class="n">bigserial</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span><br />  <span class="n">name</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><br />  <span class="n">email</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span><br />  <span class="n">created_at</span> <span class="k">timestamp</span><span class="p">,</span><br />  <span class="n">updated_at</span> <span class="k">timestamp</span><br /><span class="p">);</span><br /></code></pre>
<p>Take a look at the new table:</p>
<pre><code>sandbox=# \d+ users
                                                         Table &quot;public.users&quot;
   Column   |            Type             |                     Modifiers                      | Storage  | Stats target | Description
------------+-----------------------------+----------------------------------------------------+----------+--------------+-------------
 id         | bigint                      | not null default nextval(&#39;users_id_seq&#39;::regclass) | plain    |              |
 name       | character varying(255)      |                                                    | extended |              |
 email      | character varying(255)      | not null                                           | extended |              |
 created_at | timestamp without time zone |                                                    | plain    |              |
 updated_at | timestamp without time zone |                                                    | plain    |              |
Indexes:
    &quot;users_pkey&quot; PRIMARY KEY, btree (id)
Has OIDs: no</code></pre>
<p>Insert a new record into the users table:</p>
<pre><code class="lang-sql"><span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">created_at</span><span class="p">,</span> <span class="n">updated_at</span><span class="p">)</span><br />            <span class="k">values</span> <span class="p">(</span><span class="s1">&#39;Tobias&#39;</span><span class="p">,</span> <span class="s1">&#39;tobias@funke.com&#39;</span><span class="p">,</span> <span class="n">now</span><span class="p">(),</span> <span class="n">now</span><span class="p">());</span><br /></code></pre>
<p>Verify our new record:</p>
<pre><code>sandbox=# select * from users limit 1;
 id |  name  |      email       |         created_at         |         updated_at
----+--------+------------------+----------------------------+----------------------------
  1 | Tobias | tobias@funke.com | 2013-10-24 00:11:11.361337 | 2013-10-24 00:11:11.361337
(1 row)</code></pre>
<p>And update the record to include full name:</p>
<pre><code>sandbox=# update users set name=&#39;Tobias Funke&#39; where id=1;
sandbox=# select name from users where id = 1;
     name
--------------
 Tobias Funke
(1 row)</code></pre>
<p>That should be a enough to get you started. For some additional information on Postgres, checkout <a href="http://www.craigkerstiens.com/2012/04/30/why-postgres/">Why Postgres</a>, <a href="http://www.craigkerstiens.com/2012/05/07/why-postgres-part-2/">Why Postgres Part 2</a> and an awesome <a href="http://www.postgresguide.com/">postgres guide</a>.</p>

    </div>
  </div>

<script>
  var _gaq=[['_setAccount','UA-22235222-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>
